<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Mac Task Manager</title>
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the retro theme and responsiveness */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
            padding: 0;
            margin: 0;
            min-height: 100vh;
        }
        .retro-border {
            border: 2px solid #000000;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 4px 4px 0px 0px #000000;
        }
        .retro-inset {
            border: 2px solid #000000;
            border-radius: 0.375rem; /* rounded-md */
        }
        .btn-retro {
            border: 2px solid #000000;
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 2px 2px 0px 0px #000000;
            transition: all 100ms;
        }
        .btn-retro:active {
            box-shadow: 0 0 0 0 #000000;
            transform: translate(2px, 2px);
        }
        /* Main application grid layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 200px 1fr 300px;
            min-height: calc(100vh - 120px);
        }
        /* Responsiveness */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 200px 1fr;
            }
            .task-details-pane {
                display: none;
            }
        }
        @media (max-width: 768px) {
             .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .sidebar-pane {
                display: none;
            }
        }
        /* Sidebar Navigation Styles */
        .nav-link:hover {
            background-color: #DDDDDD;
        }
        .nav-link.active {
            background-color: #DDDDDD;
            border-left: 4px solid #000;
            padding-left: calc(0.75rem - 4px);
        }
        /* Task List Item Styles */
        .task-list-item.selected {
            background-color: #D3D3D3;
            border-left: 4px solid #000;
            padding-left: calc(0.75rem - 4px);
        }
        .task-done {
            text-decoration: line-through;
            color: #6B7280;
        }
    </style>
</head>
<body>

<!-- Root Container for the entire application -->
<div id="root">
    <!-- The structure will be filled by JavaScript -->
</div>

<!-- Pure JavaScript Application Logic -->
<script>
    // Global State
    let tasks = [];
    let currentFilter = 'Today';
    let selectedTaskId = null;
    let modalState = null; // { title, message, isConfirm, resolve }
    let sessionId = null; // Used for local storage scoping
    let prankCounter = 0; // Used as a simple flag: 0 means sequence has not started for the current input

    // Local Storage Keys
    const STORAGE_KEY = 'retroTaskManager_tasks';
    const SESSION_ID_KEY = 'retroTaskManager_sessionId';

    // The messages that will appear sequentially when clicking "ADD"
    const PRANK_MESSAGES = [
        { title: "SYSTEM ERROR", message: "‚ö†Ô∏è Alam mo bang may gusto akong sabihin sa 'yo?" },
        { title: "FATAL EXCEPTION", message: "üõë Magmula nang nakita ka'y naakit ako" },
        { title: "CRITICAL ALERT", message: "üö® ??!?!....." },
        { title: "YOUR MISSY THE GREAT", message: "üîí I love you, bab. Ikaw lang palagi ha. muahhpspspqw üòâ" }
    ];


    // --- Local Storage Persistence ---

    function getSessionId() {
        let id = localStorage.getItem(SESSION_ID_KEY);
        if (!id) {
            // Generate a session ID if one doesn't exist (unique browser instance ID)
            id = crypto.randomUUID(); 
            localStorage.setItem(SESSION_ID_KEY, id);
        }
        return id;
    }

    function loadTasks() {
        try {
            const storedTasks = localStorage.getItem(STORAGE_KEY);
            return storedTasks ? JSON.parse(storedTasks) : [];
        } catch (e) {
            console.error("Error loading tasks from localStorage:", e);
            return [];
        }
    }

    function saveTasks() {
        try {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
        } catch (e) {
            console.error("Error saving tasks to localStorage:", e);
        }
    }

    // --- Modal Management (Replaces alert/confirm) ---

    function renderModal() {
        const root = document.getElementById('root');
        let modalEl = document.getElementById('retro-modal');

        if (!modalState) {
            if (modalEl) root.removeChild(modalEl);
            return;
        }

        if (!modalEl) {
            modalEl = document.createElement('div');
            modalEl.id = 'retro-modal';
            modalEl.className = "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4";
            root.appendChild(modalEl);
        }

        const { title, message, isConfirm, resolve } = modalState;

        const handleAction = (result) => {
            if (resolve) {
                resolve(result);
            }
            modalState = null;
            renderModal(); // Hide modal
        };

        const buttons = isConfirm ? `
            <button onclick="window.handleModalAction(false)" class="btn-retro px-4 py-2 bg-gray-200 hover:bg-gray-300 text-sm">Cancel</button>
            <button onclick="window.handleModalAction(true)" class="btn-retro px-4 py-2 bg-black text-white hover:bg-gray-800 text-sm">Confirm</button>
        ` : `
            <button onclick="window.handleModalAction(true)" class="btn-retro px-4 py-2 bg-black text-white hover:bg-gray-800 text-sm">OK</button>
        `;

        modalEl.innerHTML = `
            <div class="bg-white retro-border w-full max-w-md">
                <div class="p-3 bg-gray-200 border-b-2 border-black flex items-center rounded-t-lg">
                     <div class="w-[10px] h-[10px] rounded-full bg-black mr-2"></div>
                     <span class="text-sm font-bold ml-1">${title}</span>
                </div>
                <div class="p-6">
                    <p class="mb-6">${message}</p>
                    <div class="flex justify-end space-x-4">${buttons}</div>
                </div>
            </div>
        `;
        window.handleModalAction = handleAction; // Expose handler globally for inline clicks
    }

    function showModal(title, message, isConfirm = false) {
        return new Promise(resolve => {
            modalState = { title, message, isConfirm, resolve };
            renderModal();
        });
    }

    const confirmCustom = (message, title) => showModal(title, message, true);
    const alertCustom = (message, title) => showModal(title, message, false);

    // --- Core Rendering Functions ---

    function getFilteredTasks() {
        return tasks.filter(task => {
            if (currentFilter === 'All Tasks') {
                return true;
            }
            if (currentFilter === 'Today') {
                // 'Today' shows all incomplete tasks
                return !task.completed;
            }
            // Filter by specific list (only incomplete tasks)
            return task.list === currentFilter && !task.completed;
        }).sort((a, b) => b.createdAt - a.createdAt); // Sort by newest first
    }
    
    function getTaskCounts() {
        return {
            totalRemaining: tasks.filter(t => !t.completed).length,
            inbox: tasks.filter(t => !t.completed && t.list === 'Inbox').length,
            personal: tasks.filter(t => !t.completed && t.list === 'Personal').length,
            work: tasks.filter(t => !t.completed && t.list === 'Work').length,
            allTasks: tasks.length,
        };
    }

    function updateUI() {
        renderModal(); // Ensure modal state is always checked
        renderSidebar();
        renderTaskList();
        renderTaskDetails();
        saveTasks(); // Save state after every UI update
    }

    function renderSidebar() {
        const counts = getTaskCounts();
        const sidebarContent = document.getElementById('sidebar-content');
        if (!sidebarContent) return;

        const NavItem = (name, icon, count, filter) => {
            const activeClass = currentFilter === filter ? 'active' : '';
            return `
                <div class="flex justify-between items-center px-3 py-2 rounded-lg nav-link cursor-pointer ${activeClass}" 
                     data-filter="${filter}" onclick="window.changeFilter('${filter}')">
                    <span class="flex items-center">
                        <span class="mr-2">${icon}</span> ${name}
                    </span>
                    <span class="font-mono text-xs retro-inset px-2 py-0.5 bg-white">${count || 0}</span>
                </div>
            `;
        };
        
        const inboxIcon = '<div class="w-2 h-2 rounded-full bg-gray-400"></div>';
        const personalIcon = '<div class="w-2 h-2 rounded-full bg-red-400"></div>';
        const workIcon = '<div class="w-2 h-2 rounded-full bg-blue-400"></div>';


        sidebarContent.innerHTML = `
            <div>
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold">Menu</h2>
                </div>
                <div class="space-y-4">

                    <div class="px-3 py-2 font-bold text-sm text-gray-700">VIEWS</div>
                    <div class="space-y-1">
                        ${NavItem("Today", "üìù", counts.totalRemaining, "Today")}
                        ${NavItem("All Tasks", "üìÅ", counts.allTasks, "All Tasks")}
                    </div>

                    <div class="px-3 py-4 font-bold text-sm text-gray-700">LISTS</div>
                    <div class="space-y-1">
                        ${NavItem("Inbox", inboxIcon, counts.inbox, "Inbox")}
                        ${NavItem("Personal", personalIcon, counts.personal, "Personal")}
                        ${NavItem("Work", workIcon, counts.work, "Work")}
                        <div class="flex items-center px-3 py-2 text-sm text-black cursor-pointer hover:bg-gray-200 rounded-lg">
                            + Add New List (Mock)
                        </div>
                    </div>

                    <div class="px-3 py-4 font-bold text-sm text-gray-700">TAGS</div>
                    <div class="flex flex-wrap px-3 space-x-1">
                        <span class="text-xs bg-pink-200 retro-inset px-2 py-1">Important</span>
                        <span class="text-xs bg-yellow-200 retro-inset px-2 py-1">Urgent</span>
                        <span class="text-sm cursor-pointer hover:underline text-gray-600">+ Add Tag (Mock)</span>
                    </div>
                </div>
            </div>

            <!-- Footer for Session ID and Status -->
            <div class="mt-8 border-t pt-4 text-sm text-gray-600">
                <div class="flex justify-between items-center mb-2">
                     <span class="flex items-center space-x-1 cursor-pointer hover:text-black">
                        <span class="text-lg">üíæ</span>
                        <span>Settings (Mock)</span>
                     </span>
                     <span class="cursor-pointer hover:text-black">‚û°Ô∏è Sign out (Mock)</span>
                </div>
                <span class="font-bold">Session ID:</span>
                <span id="user-id-display" class="font-mono text-xs bg-gray-200 px-1 rounded-sm break-words">${sessionId || 'Loading...'}</span>
                <p class="text-xs mt-1">Data saved to browser's Local Storage.</p>
            </div>
        `;
    }

    function renderTaskList() {
        const filtered = getFilteredTasks();
        const taskListContainer = document.getElementById('task-list-content');
        const listHeader = document.getElementById('list-header');
        
        if (!taskListContainer || !listHeader) return;

        listHeader.innerHTML = `
            <h2 class="text-2xl font-extrabold flex items-center space-x-2">
                <span>${currentFilter}</span>
                <span class="text-sm bg-black text-white px-2 py-0.5 rounded-sm">${filtered.length}</span>
            </h2>
        `;
        
        if (filtered.length === 0) {
            taskListContainer.innerHTML = `
                <div class="p-6 text-center text-gray-600">
                    <p class="text-lg font-bold">No tasks found in "${currentFilter}".</p>
                    <p class="mt-1">Use the "ADD" button above to create one.</p>
                </div>
            `;
            return;
        }

        taskListContainer.innerHTML = filtered.map(task => {
            const isSelected = task.id === selectedTaskId;
            const completedClass = task.completed ? 'task-done' : '';
            const selectedClass = isSelected ? 'selected' : '';
            const listColor = task.list === 'Work' ? 'text-blue-500' : task.list === 'Personal' ? 'text-red-500' : 'text-gray-500';

            return `
                <div class="p-3 flex justify-between items-center border-b border-gray-300 task-list-item cursor-pointer ${selectedClass}"
                     data-task-id="${task.id}" onclick="window.selectTask('${task.id}')">
                    <div class="flex items-center space-x-3 w-full">
                        <input type="checkbox" data-task-id="${task.id}" class="h-4 w-4 border border-black rounded-sm focus:ring-0" 
                               ${task.completed ? 'checked' : ''} onchange="window.toggleTaskCompletion('${task.id}', ${task.completed})"/>
                        <div class="flex-1 min-w-0">
                            <p class="text-base font-medium truncate ${completedClass}">${task.text}</p>
                            <div class="flex text-xs space-x-2 mt-1 text-gray-500">
                                <span class="font-semibold ${listColor}">${task.list || 'Inbox'}</span>
                                ${task.dueDate ? `<span>üìÖ ${task.dueDate}</span>` : ''}
                                ${task.subtasks?.length > 0 ? `<span>üîó ${task.subtasks.length} Subtasks</span>` : ''}
                            </div>
                        </div>
                        <span class="text-xl font-bold text-gray-400">&gt;</span>
                    </div>
                </div>
            `;
        }).join('');
    }

    function renderTaskDetails() {
        const detailsContainer = document.getElementById('task-details-content');
        if (!detailsContainer) return;
        
        const selectedTask = tasks.find(t => t.id === selectedTaskId);

        if (!selectedTask) {
            detailsContainer.innerHTML = `
                <div class="p-4 border-b-2 border-black bg-gray-200">
                    <h2 class="text-2xl font-extrabold">Details:</h2>
                </div>
                <div class="flex-1 p-6 text-gray-500">
                    Select a task to view and edit details here.
                </div>
            `;
            return;
        }
        
        // This is a complex form, so we use a template and attach event listeners dynamically
        detailsContainer.innerHTML = `
            <div class="flex flex-col h-full">
                <div class="p-4 border-b-2 border-black bg-gray-200">
                    <h2 class="text-2xl font-extrabold truncate">Task: ${selectedTask.text}</h2>
                </div>
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="space-y-4">
                        <!-- Task Name Input -->
                        <div>
                            <label class="block text-sm font-semibold mb-1" for="task-name">Task:</label>
                            <input type="text" id="task-name" value="${selectedTask.text || ''}" class="w-full p-2 retro-inset focus:outline-none"/>
                        </div>

                        <!-- Description Input -->
                        <div>
                            <label class="block text-sm font-semibold mb-1" for="task-description">Description:</label>
                            <textarea id="task-description" class="w-full p-2 retro-inset focus:outline-none h-20">${selectedTask.description || ''}</textarea>
                        </div>

                        <!-- Status/List Info -->
                        <div class="flex space-x-4">
                            <div>
                                <label class="block text-sm font-semibold mb-1" for="task-list">List:</label>
                                <select id="task-list" class="p-2 retro-inset focus:outline-none">
                                    <option value="Inbox" ${selectedTask.list === 'Inbox' ? 'selected' : ''}>Inbox</option>
                                    <option value="Personal" ${selectedTask.list === 'Personal' ? 'selected' : ''}>Personal</option>
                                    <option value="Work" ${selectedTask.list === 'Work' ? 'selected' : ''}>Work</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-1" for="task-due-date">Due date:</label>
                                <input type="date" id="task-due-date" value="${selectedTask.dueDate || ''}" class="p-2 retro-inset focus:outline-none"/>
                            </div>
                        </div>

                        <!-- Tags Section (Mock) -->
                        <div class="border-t border-dashed pt-4">
                            <label class="block text-sm font-semibold mb-2">Tags:</label>
                            <div class="flex flex-wrap space-x-2">
                                ${selectedTask.tags?.map(tag => `<span class="text-sm bg-gray-200 retro-inset px-2 py-1">${tag}</span>`).join('')}
                                <button class="text-sm text-gray-600 hover:underline cursor-pointer">+ Add Tag</button>
                            </div>
                        </div>

                        <!-- Subtasks Section (Mock) -->
                        <div class="border-t border-dashed pt-4">
                            <label class="block text-sm font-semibold mb-2">Subtasks:</label>
                            <div class="space-y-1">
                                ${selectedTask.subtasks?.length > 0 ? selectedTask.subtasks.map((sub, index) => `
                                    <div class="flex items-center text-sm">
                                        <input type="checkbox" class="h-3 w-3 mr-2 border border-black rounded-sm" ${sub.completed ? 'checked' : ''} disabled />
                                        <span class="${sub.completed ? 'task-done' : ''}">${sub.text}</span>
                                    </div>
                                `).join('') : '<p class="text-sm text-gray-500">No subtasks defined.</p>'}
                                <div class="text-sm text-gray-600 hover:underline mt-2 cursor-pointer">+ Add New Subtask</div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-between mt-8 border-t pt-4">
                        <button id="delete-task-btn" class="btn-retro px-4 py-2 bg-black text-white hover:bg-gray-800 text-sm">
                            DELETE TASK
                        </button>
                        <button id="save-task-btn" class="btn-retro px-4 py-2 text-black font-bold text-sm bg-yellow-300 hover:bg-yellow-400">
                            Save changes
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        // Attach event listeners for the details pane
        document.getElementById('save-task-btn').onclick = handleSave;
        document.getElementById('delete-task-btn').onclick = handleDelete;
    }

    // --- Action Handlers ---

    // Exposed to global scope for use in inline HTML click handlers
    window.changeFilter = (filter) => {
        currentFilter = filter;
        selectedTaskId = null; // Deselect task when changing filter
        updateUI();
    };
    
    window.selectTask = (taskId) => {
        selectedTaskId = taskId;
        updateUI();
    };

    window.toggleTaskCompletion = (taskId, currentStatus) => {
        const taskIndex = tasks.findIndex(t => t.id === taskId);
        if (taskIndex !== -1) {
            tasks[taskIndex].completed = !currentStatus;
            updateUI();
        } else {
            alertCustom('Task not found for completion toggle.', 'Error');
        }
    };

    window.handleAddTask = async function() {
        const inputElement = document.getElementById('task-input');
        const text = inputElement.value.trim();
        const addButton = document.getElementById('add-task-btn');

        if (!text) {
            // Standard validation: cannot add an empty task
            return; 
        }
        
        // Use prankCounter == 0 as a flag to run the sequence only once per task attempt
        if (prankCounter === 0) {
            
            // 1. Cache the original text before the prank clears it
            const originalText = text;
            prankCounter = 1; // Set flag to prevent re-entry (even though button is disabled)
            
            // 2. Temporarily disable inputs/button for the entire sequence
            addButton.disabled = true;
            inputElement.disabled = true;

            // 3. Run the sequence of modals immediately after dismissal
            for (let i = 0; i < PRANK_MESSAGES.length; i++) {
                const { title, message } = PRANK_MESSAGES[i];
                
                // Show modal and WAIT for user to dismiss
                await alertCustom(message, title);
                
                // Introduce a tiny delay before the next one appears for a more dramatic effect
                if (i < PRANK_MESSAGES.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 100)); 
                }
                
                // The prank: clear the input after the first error
                if (i === 0) {
                     inputElement.value = '';
                }
            }
            
            // 4. --- Task Addition (Success condition met after 4 dismissals) ---
            
            const list = ['Today', 'All Tasks'].includes(currentFilter) ? 'Inbox' : currentFilter;

            const newTask = {
                id: crypto.randomUUID(),
                text: originalText, // Use the cached text
                completed: false,
                createdAt: Date.now(),
                description: 'Task successfully added after resolving multiple critical system errors.',
                list: list,
                dueDate: '',
                tags: [],
                subtasks: []
            };

            tasks.unshift(newTask); // Add to the beginning
            
            // 5. Cleanup
            prankCounter = 0; // Reset for the next ADD click
            addButton.disabled = false;
            inputElement.disabled = false;

            // 6. Automatically select the new task and update UI
            selectedTaskId = newTask.id;
            if (currentFilter === 'Today' || currentFilter === 'All Tasks') {
                currentFilter = 'Inbox';
            }
            updateUI();
        }
    };
    
    window.handleSave = function() {
        if (!selectedTaskId) return;
        
        const name = document.getElementById('task-name').value.trim();
        const description = document.getElementById('task-description').value;
        const list = document.getElementById('task-list').value;
        const dueDate = document.getElementById('task-due-date').value;
        const saveButton = document.getElementById('save-task-btn');

        if (!name) {
            alertCustom('Task name cannot be empty.', 'Validation Error');
            return;
        }

        saveButton.innerHTML = 'Saving...';
        saveButton.disabled = true;

        const taskIndex = tasks.findIndex(t => t.id === selectedTaskId);

        if (taskIndex !== -1) {
            tasks[taskIndex].text = name;
            tasks[taskIndex].description = description;
            tasks[taskIndex].list = list;
            tasks[taskIndex].dueDate = dueDate;

            // Simulate save success animation
            saveButton.innerHTML = 'Saved!';
            saveButton.className = saveButton.className.replace('bg-yellow-300 hover:bg-yellow-400', 'bg-green-300');
            
            // Revert status after a short delay
            setTimeout(() => {
                saveButton.innerHTML = 'Save changes';
                saveButton.className = saveButton.className.replace('bg-green-300', 'bg-yellow-300 hover:bg-yellow-400');
                saveButton.disabled = false;
            }, 1500);

            updateUI();
        } else {
            alertCustom('Failed to find task to save.', 'Save Error');
            saveButton.innerHTML = 'Save changes';
            saveButton.disabled = false;
        }
    }

    window.handleDelete = async function() {
        if (!selectedTaskId) return;

        const userConfirmed = await confirmCustom(
            'Are you sure you want to delete this task? This action cannot be undone.',
            'Delete Task'
        );

        if (userConfirmed) {
            const initialLength = tasks.length;
            tasks = tasks.filter(t => t.id !== selectedTaskId);
            
            if (tasks.length < initialLength) {
                selectedTaskId = null;
                updateUI(); // Re-render to clear details pane
            } else {
                 alertCustom('Failed to find and delete task.', 'Deletion Error');
            }
        }
    }
    
    // --- Initial Layout Setup ---

    window.initApp = function() {
        // 1. Load Session ID and Tasks
        sessionId = getSessionId();
        tasks = loadTasks();
        
        // 2. Render the static HTML framework
        document.getElementById('root').innerHTML = `
            <div class="p-0 bg-gray-100 min-h-screen">
                <!-- Top Navbar -->
                <nav class="w-full bg-white border-b-2 border-black sticky top-0 z-20 flex items-center justify-between px-4 sm:px-8 h-[60px]">
                    <div class="flex space-x-4 h-full text-sm font-semibold">
                        <div class="flex items-center cursor-pointer hover:bg-gray-100 px-2">File (Mock)</div>
                        <div class="flex items-center cursor-pointer hover:bg-gray-100 px-2">Edit (Mock)</div>
                        <div class="flex items-center cursor-pointer hover:bg-gray-100 px-2">View (Mock)</div>
                    </div>
                    <button onclick="window.changeFilter('Inbox')" class="btn-retro px-4 py-2 my-2 bg-black text-white font-bold whitespace-nowrap hover:bg-gray-800 text-sm">
                        QUICK ADD TO INBOX
                    </button>
                </nav>

                <div class="p-4 md:p-8 lg:p-12 h-full">
                    <div class="max-w-7xl mx-auto bg-white retro-border shadow-2xl overflow-hidden rounded-lg">
                        <div class="dashboard-grid w-full">
                            <!-- Sidebar Pane -->
                            <div id="sidebar-content" class="sidebar-pane p-4 border-r-2 border-black bg-gray-100 flex flex-col justify-between">
                                <!-- Content loaded by renderSidebar -->
                            </div>
                            
                            <!-- Task List Pane -->
                            <div class="flex flex-col border-r-2 border-black">
                                <div id="list-header" class="p-4 border-b-2 border-black flex justify-between items-center bg-gray-200">
                                    <!-- Content loaded by renderTaskList -->
                                </div>
                                <div class="p-4 border-b-2 border-black">
                                    <div class="flex items-center space-x-2">
                                        <input type="text" id="task-input" placeholder="+ Add New Task" class="flex-1 p-2 text-base retro-inset focus:outline-none focus:ring-0" onkeypress="if(event.key === 'Enter') window.handleAddTask()"/>
                                        <button id="add-task-btn" onclick="window.handleAddTask()" class="btn-retro px-3 py-2 bg-black text-white text-sm hover:bg-gray-800">ADD</button>
                                    </div>
                                </div>
                                <div id="task-list-content" class="flex-1 overflow-y-auto">
                                    <!-- Content loaded by renderTaskList -->
                                </div>
                            </div>
                            
                            <!-- Task Details Pane -->
                            <div id="task-details-content" class="task-details-pane hidden lg:block border-l-2 border-black">
                                <!-- Content loaded by renderTaskDetails -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // 3. Initial UI update
        updateUI();
    };

    // Start the application when the window loads
    window.onload = () => {
        window.initApp();
    };
    
</script>

</body>
</html>
